sendtrap.py
All rights reserved to Ericsson CBC/XN team.

Version: 3.0
Author: EJLNOQC
Current Release time: 2015-02-11
This tool use pysnmp to simulate to send SNMP trap.


工具目前支持三种模式的发送告警方式：Normal(-m n), Storm(-m m), Special(-m s), 默认为Normal模式.

普通模式：
	python -m n -l 1,2,3,4 -t "2015-02-02 02:02:02" -I 30 -H 11.11.11.11
	-l 1,2,3,4 指定将要发送的alarm，1,2,3,4分别对应/sendtrap/conf/mapping.txt相对应的告警， 本例中为：SGSN_liX3LinkFailureMajor，SGSN_liX3LinkFailureMinor，SGSN_liX2ConnFailureMajor，SGSN_liX2ConnFailureMinor
	-t 指定第一个告警的告警时间为"2015-02-02 02:02:02", -I指定告警时间的偏移量，以秒为单位，在本例子中，第二条告警的时间为"2015-02-02 02:02:32", 第三条告警的时间为"2015-02-02 02:03:02"， 以此类推。
	
	普通模式将会把-l指定的告警发送一轮就结束，告警的发送间隔默认为1秒，-l为必选命令选项，当不指定-t时，告警将以当前系统时间作为其时间戳。
	
风暴模式：
	该模式将循环发送告警，可指定告警的发送速度与持续时间。
	
	python -m m -l 1,2,3,4 -n 100 -d 5 -r 3 -w 600 -H 11.11.11.11
	-n 100: 每秒发送100条告警，10ms一条。
	-d 5：告警风暴每轮持续5分钟。
	-r 3：总共发送3轮告警风暴。
	-w 600: 告警风暴两轮之间的间隔为600秒，即 10分钟。
	
	在本例子中，工具将以每秒100条的速度发送三轮告警风暴，每轮持续5分钟，两轮告警风暴之间的间隔为10分钟。将以发送告警时的系统时间为告警自身的时间戳。
	
特殊模式：
	该模式与风暴模式类似，只是-l指定的最后一条告警的告警ID与上一条告警ID一样，满足模拟网元自动发送clear告警的情况。
	python -m s -l 3,2,1,33 -n 100 -d 5 -r 3 -w 600 -H 11.11.11.11
	注意在该模式中，-l指定的最后两个告警需是成对的新告警和其对应的清除告警，否则每轮最后一条的告警和前一条告警的ID相同，将会被Alarm Manager作为无效Alarm而丢弃。
	在本例子中，-l 3,2,1,33的情况将是：工具按照3，2，1，33的顺序循环发送告警，并且1,33的告警ID相同，用以模拟网元自动发送了清除告警。
	
注意：
	1. /sendtrap/counter/prop定义了当前的计数器数值，该数值在发送告警时进行自增并作为告警的ID，避免发送告警ID为重复的告警，在程序终止时，工具将会把计数器的新值写回配置文件中，保证每次运行时的计数器数值都是不重复的。
